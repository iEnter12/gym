<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>首页 - 健身房管理系统</title>
    <link rel="stylesheet" href="../../assets/css/element-ui.css">
    <link rel="stylesheet" href="../../assets/css/common.css">
    <link rel="stylesheet" href="../../assets/css/user.css">
</head>
<body>
    <div id="app">
        <el-container>
            <el-header>
                <div class="header-content">
                    <h1>健身房管理系统</h1>
                    <div class="user-info">
                        <span>{{ userInfo.username }}</span>
                        <el-button type="text" @click="logout">退出</el-button>
                    </div>
                </div>
            </el-header>
            
            <el-main>
                <!-- 轮播图 -->
                <el-carousel height="400px" class="home-carousel">
                    <el-carousel-item v-for="item in carouselItems" :key="item.title">
                        <div class="carousel-content" :style="{ backgroundImage: `url(${item.image})` }">
                            <div class="carousel-text">
                                    <h2>{{ item.title }}</h2>
                                    <p>{{ item.description }}</p>
                                </div>
                            </div>
                        </el-carousel-item>
                    </el-carousel>

                <!-- 快捷导航 -->
                <div class="quick-nav">
                    <el-row :gutter="20">
                        <el-col :span="6">
                            <el-card shadow="hover" @click.native="goToPage('facilities')">
                                <i class="el-icon-office-building"></i>
                                <span>场馆预约</span>
                            </el-card>
                        </el-col>
                        <el-col :span="6">
                            <el-card shadow="hover" @click.native="goToPage('profile')">
                                <i class="el-icon-user"></i>
                                <span>个人中心</span>
                            </el-card>
                        </el-col>
                        <el-col :span="6">
                            <el-card shadow="hover" @click.native="goToPage('ai-chat')">
                                <i class="el-icon-chat-dot-round"></i>
                                <span>AI助手</span>
                            </el-card>
                        </el-col>
                        <el-col :span="6">
                            <el-card shadow="hover" @click.native="goToPage('reviews')">
                                <i class="el-icon-chat-line-round"></i>
                                <span>评价反馈</span>
                            </el-card>
                        </el-col>
                    </el-row>
                </div>

                <!-- 统计信息 -->
                <div class="statistics-section">
                    <el-row :gutter="20" v-loading="loading">
                        <el-col :span="6">
                            <el-card shadow="hover">
                                <div class="stat-item">
                                    <i class="el-icon-date"></i>
                                    <div class="stat-info">
                                        <div class="stat-value">{{ statistics.totalBookings }}</div>
                                        <div class="stat-label">总预约数</div>
                                    </div>
                                        </div>
                            </el-card>
                        </el-col>
                        <el-col :span="6">
                            <el-card shadow="hover">
                                <div class="stat-item">
                                    <i class="el-icon-time"></i>
                                    <div class="stat-info">
                                        <div class="stat-value">{{ statistics.activeBookings }}</div>
                                        <div class="stat-label">进行中预约</div>
                                    </div>
                                </div>
                            </el-card>
                        </el-col>
                        <el-col :span="6">
                            <el-card shadow="hover">
                                <div class="stat-item">
                                    <i class="el-icon-check"></i>
                                    <div class="stat-info">
                                        <div class="stat-value">{{ statistics.completedBookings }}</div>
                                        <div class="stat-label">已完成预约</div>
                        </div>
                                </div>
                            </el-card>
                        </el-col>
                        <el-col :span="6">
                            <el-card shadow="hover">
                                <div class="stat-item">
                                    <i class="el-icon-chat-line-round"></i>
                                    <div class="stat-info">
                                        <div class="stat-value">{{ statistics.totalReviews }}</div>
                                        <div class="stat-label">评价数量</div>
                                    </div>
                                </div>
                            </el-card>
                        </el-col>
                    </el-row>
                </div>

                <!-- 最近预约 -->
                <div class="recent-bookings">
                    <h2>最近预约</h2>
                    <el-table :data="recentBookings" style="width: 100%">
                        <el-table-column prop="facility.name" label="场馆名称"></el-table-column>
                        <el-table-column prop="booking_date" label="预约日期">
                            <template slot-scope="scope">
                                {{ formatDate(scope.row.booking_date) }}
                            </template>
                        </el-table-column>
                        <el-table-column prop="time_slot" label="时间段"></el-table-column>
                        <el-table-column prop="status" label="状态">
                            <template slot-scope="scope">
                                <el-tag :type="scope.row.status === 'confirmed' ? 'success' : 'info'">
                                    {{ formatStatus(scope.row.status) }}
                                </el-tag>
                            </template>
                        </el-table-column>
                    </el-table>
                </div>
            </el-main>
        </el-container>
    </div>

    <script src="../../assets/js/vue.js"></script>
    <script src="../../assets/js/element-ui.js"></script>
    <script src="../../utils/api.js"></script>
    <script src="../../utils/auth.js"></script>
    <script src="../../utils/mock.js"></script>
    <script type="module">
        import Home from '../../assets/js/pages/user/home.js';
        
        new Vue({
            el: '#app',
            ...Home
        });
    </script>
</body>
</html>

